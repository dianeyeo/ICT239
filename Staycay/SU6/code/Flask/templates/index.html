<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <!-- import plugin script -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js'></script>
</head>
<body>
<h1>Flask Partner News Chart</h1>
<!-- bar chart canvas element -->
<canvas id="chart" width="300" height="200"></canvas>
{% for item in records %}
<div>
    source: {{item._id}}<br>
    count: {{item.count}}<br>
</div>
{% endfor %}
<script>
    // bar chart data
    var barData = {
        labels: [
            {% for item in records %}
                "{{item._id}}",
            {% endfor %}],
        datasets: [
            {
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                data: [
                    {% for item in records %}
                        {{item.count}},
                    {% endfor %}]
            }
        ]
    }

    // get bar chart canvas
    var mychart = document.getElementById("chart").getContext("2d");
    steps = 6
    // draw bar chart
    new Chart(mychart).Bar(barData, {
        scaleOverride: true,
        scaleSteps: steps,
        scaleStepWidth: 3,
        scaleStartValue: 0,
        scaleShowVerticalLines: true,
        scaleShowGridLines : true,
        barShowStroke : true,
        scaleShowLabels: true
    });
</script>
</body></html>